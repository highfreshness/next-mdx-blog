---
title: ğŸ§‘â€ğŸ’» Yolo v5 Convert to ONNX
description: Yolo v5ë¥¼ ONNXë¡œ ë³€í™˜ í›„ ì ìš©
date: 2024-01-01
published: true
---

## yolov5 Weightë¡œ ONNX Convert

1. ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ shellì— ì…ë ¥í•˜ë©´ .ptíŒŒì¼ì´ ìˆë˜ ê²½ë¡œì— ê°™ì€ ì´ë¦„ì˜ .onnx íŒŒì¼ì´ ìƒì„±ëœë‹¤.

```
python export.py --weights <.pt íŒŒì¼ ê²½ë¡œ> --include torchscript onnx
```

1. detect.pyë¥¼ ì‚¬ìš©í•  ë•Œ ì°¸ê³ í•  argumentë“¤

```
weights=ROOT / 'yolov5s.pt',  # model path or triton URL
        source=ROOT / 'data/images',  # file/dir/URL/glob/screen/0(webcam)
        data=ROOT / 'data/coco128.yaml',  # dataset.yaml path
        imgsz=(640, 640),  # inference size (height, width)
        conf_thres=0.25,  # confidence threshold
        iou_thres=0.45,  # NMS IOU threshold
        max_det=1000,  # maximum detections per image
        device='',  # cuda device, i.e. 0 or 0,1,2,3 or cpu
        view_img=False,  # show results
        save_txt=False,  # save results to *.txt
        save_conf=False,  # save confidences in --save-txt labels
        save_crop=False,  # save cropped prediction boxes
        nosave=False,  # do not save images/videos
        classes=None,  # filter by class: --class 0, or --class 0 2 3
        agnostic_nms=False,  # class-agnostic NMS
        augment=False,  # augmented inference
        visualize=False,  # visualize features
        update=False,  # update all models
        project=ROOT / 'runs/detect',  # save results to project/name
        name='exp',  # save results to project/name
        exist_ok=False,  # existing project/name ok, do not increment
        line_thickness=3,  # bounding box thickness (pixels)
        hide_labels=False,  # hide labels
        hide_conf=False,  # hide confidences
        half=False,  # use FP16 half-precision inference
        dnn=False,  # use OpenCV DNN for ONNX inference
        vid_stride=1,  # video frame-rate stride
```

1. ìƒì„±ëœ .onnx íŒŒì¼ì€ ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ inference í•  ìˆ˜ ìˆë‹¤.

```
python detect.py \
--weights yolo_best.onnx \
--source ./sample_video \
--data data/koreafood.yaml \
--img 640 \
--conf 0.25 \
--save-txt \
--save-conf \
--hide-conf \
--vid-stride 30 \
--save-crop # í˜„ì¬ ë¬¼ì²´ ê²€ì¶œì´ ë˜ì–´ cropë  ê²½ìš° í¬ë¡­ëœ ë¶€ë¶„ë§Œ ê°€ì ¸ì˜¤ì§€ ì•Šê³  ì „ì²´ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •

```

## ì°¸ê³  ì‚¬ì´íŠ¸

[ultralytics yolov5  ì‚¬ìš©ë²• ì™„ë²½ ì •ë¦¬](https://yeko90.tistory.com/entry/ultralytics-yolov5-tutorial)

[https://github.com/ultralytics/yolov5/issues/5832](https://github.com/ultralytics/yolov5/issues/5832)